{"version":3,"sources":["card_editing_observer.js"],"names":["define","$","Ajax","Templates","Notification","SELECTORS","GENERAL_ROOT","ACTIVITY","COURSE_PROGRESS","PROMISES","GET_COURSE_PROGRESS","courseid","call","methodname","args","init","document","bind","event","target","is","data","done","response","fail","exception"],"mappings":"AACAA,OAAO,CAAC,SAAU,YAAa,iBAAkB,qBAAsB,SAASC,EAAGC,EAAMC,EAAWC,GAMhG,IAAIC,EAAY,CACZC,aAAc,mBACdC,SAAU,cACVC,gBAAiB,6BAOjBC,EAAW,CAKXC,oBAAqB,SAASC,GAC1B,OAAOT,EAAKU,KAAK,CAAC,CACdC,WAAY,0CACZC,KAAM,CACFH,SAAUA,MAEd,KAkCZ,MAAO,CACHI,KAVJ,WACId,EAAEe,UAAUC,KAAK,iBAAkB,SAASC,GAnBhD,IAEQP,EAkBIV,EAAEiB,EAAMC,QAAQC,GAAG,iBAlBvBT,EADYV,EAAEI,EAAUC,aAAe,IAAMD,EAAUG,iBAClCa,KAAK,YAC9BZ,EAASC,oBAAoBC,GACxBW,KAAK,SAASC,GACXA,EAASZ,SAAWA,IAOvBa,KAAKpB,EAAaqB","sourcesContent":["/* eslint-disable valid-jsdoc */\ndefine(['jquery', 'core/ajax', 'core/templates', 'core/notification'], function($, Ajax, Templates, Notification) {\n\n    /**\n     * Element SELECTORS list\n     * @type {Object}\n     */\n    var SELECTORS = {\n        GENERAL_ROOT: '.general-section',\n        ACTIVITY: 'li.activity',\n        COURSE_PROGRESS: '.course-prgress-container'\n    };\n\n    /**\n     * Ajax PROMISES\n     * @type {Object}\n     */\n    var PROMISES = {\n        /**\n         * GET_COURSE_PROGRESS promise call\n         * @param {Integer} courseid Course id\n         */\n        GET_COURSE_PROGRESS: function(courseid) {\n            return Ajax.call([{\n                methodname: 'format_remuiformat_course_progress_data',\n                args: {\n                    courseid: courseid\n                }\n            }])[0];\n        }\n    };\n\n    /**\n     * Update course progress when activity duplicated or deleted\n     */\n    function updateCourseProgress() {\n        var container = $(SELECTORS.GENERAL_ROOT + ' ' + SELECTORS.COURSE_PROGRESS);\n        var courseid = container.data('courseid');\n        PROMISES.GET_COURSE_PROGRESS(courseid)\n            .done(function(response) {\n                response.courseid = courseid;\n                // Templates.render('format_remuiformat/course_progress', response)\n                //     .done(function (html, js) {\n                //         Templates.replaceNode(container, html, js);\n                //     })\n                //     .fail(Notification.exception);\n            })\n            .fail(Notification.exception);\n    }\n\n    /**\n     * Initialize js\n     */\n    function init() {\n        $(document).bind('DOMNodeRemoved', function(event) {\n            if ($(event.target).is('li.activity')) {\n                updateCourseProgress();\n            }\n        });\n    }\n\n    // Must return the init function.\n    return {\n        init: init\n    };\n});\n"],"file":"card_editing_observer.min.js"}
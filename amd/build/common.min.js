define(["jquery"],function(e){var t={ACTIVITY_TOGGLE:".showactivity",ACTIVITY_TOGGLE_CLASS:"showhideactivity",ACTIVITY_TOGGLE_WRAPPER:".showactivitywrapper",FIRST_SECTION:"#section-0",SHOW:"show",TOGGLE_HIGHLIGHT:".section_action_menu .dropdown-item.editing_highlight",TOGGLE_SHOWHIDE:".section_action_menu .dropdown-item.editing_showhide",DELETE:".section_action_menu .dropdown-item.editing_delete",BUTTON_HIDE:".cm_action_menu .dropdown-menu .editing_hide",BUTTON_SHOW:".cm_action_menu .dropdown-menu .editing_show",ACTIVITYBUTTON_HIDE:'.cm_action_menu .dropdown-menu [data-action="cmHide"]',ACTIVITYBUTTON_SHOW:'.cm_action_menu .dropdown-menu [data-action="cmShow"]',ACTIVITYDUPLICATE:".cm_action_menu .dropdown-item.editing_duplicate",ACTIVITIYDELETE:".cm_action_menu  .dropdown-item.editing_delete"};function n(){e(t.FIRST_SECTION+" .activity").length<=function(){let t=e(window).width();return e(".remui-format-list").length?t>=992?4:t>=768?3:2:t>=768?4:t>=481?2:1}()?(e(t.FIRST_SECTION).removeClass(t.ACTIVITY_TOGGLE_CLASS),e(t.ACTIVITY_TOGGLE_WRAPPER).hide()):(e(t.ACTIVITY_TOGGLE_WRAPPER).show(),e(t.FIRST_SECTION).addClass(t.ACTIVITY_TOGGLE_CLASS))}return{init:function(){e("#page-course-view-remuiformat .section-modchooser-link:not(.dropdown-item)").addClass("btn btn-primary"),n(),e(window).resize(function(){n()}),"none"==e(".general-section-activities li:last").css("display")?e(".showactivitywrapper").show():e(".showactivitywrapper").hide(),e(t.ACTIVITY_TOGGLE).on("click",function(){e(this).hasClass(t.SHOW)?(e(this).html(M.util.get_string("showless","format_remuiformat")),e(this).toggleClass(t.SHOW)):(e(this).html(M.util.get_string("showmore","format_remuiformat")),e(this).toggleClass(t.SHOW),e("html, body").animate({scrollTop:e(t.FIRST_SECTION+" .activity:first-child").offset().top-66},"slow")),e(t.FIRST_SECTION).toggleClass(t.ACTIVITY_TOGGLE_CLASS)}),e("body").on("click",`${t.TOGGLE_HIGHLIGHT},\n                               ${t.TOGGLE_SHOWHIDE},\n                               ${t.BUTTON_HIDE},\n                               ${t.BUTTON_SHOW},\n                               ${t.ACTIVITYBUTTON_HIDE},\n                               ${t.ACTIVITYBUTTON_SHOW}`,function(){setTimeout(function(){location.reload()},400)}),e("body").on("click",`${t.ACTIVITYDUPLICATE}`,function(){setTimeout(function(){location.reload()},200)}),e("body").on("click",`${t.ACTIVITIYDELETE},${t.DELETE}`,function(t){return t.preventDefault(),"cmDelete"==e(this).attr("data-action")&&(window.location.href=e(this).attr("href")),"deleteSection"==e(this).attr("data-action")&&(moodleversionbranch>="405"?location.reload():window.location.href=e(this).attr("href")),!0}),e("body").on("click",'[data-action="addModule"]',function(e){return setTimeout(()=>{location.reload()},200),!0}),e(".read-more-target").height()>300&&(e(".generalsectioninfo").find("#readmorebtn").removeClass("d-none"),e(".read-more-target").addClass("summary-collapsed").removeClass("summary-expanded")),e("#readmorebtn").on("click",function(){e(".read-more-target").addClass("summary-expanded").removeClass("summary-collapsed"),e(".generalsectioninfo").find("#readmorebtn").addClass("d-none"),e(".generalsectioninfo").find("#readlessbtn").removeClass("d-none")}),e("#readlessbtn").on("click",function(){e(".read-more-target").addClass("summary-collapsed").removeClass("summary-expanded"),e(".generalsectioninfo").find("#readmorebtn").removeClass("d-none"),e(".generalsectioninfo").find("#readlessbtn").addClass("d-none")})},adjustGeneralSectionActivities:n}});
//# sourceMappingURL=common.min.js.map

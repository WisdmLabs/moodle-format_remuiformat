define(["jquery"],function(e){var t={ACTIVITY_TOGGLE:".showactivity",ACTIVITY_TOGGLE_CLASS:"showhideactivity",ACTIVITY_TOGGLE_WRAPPER:".showactivitywrapper",FIRST_SECTION:"#section-0",SHOW:"show",TOGGLE_HIGHLIGHT:".section_action_menu .dropdown-item.editing_highlight",TOGGLE_SHOWHIDE:".section_action_menu .dropdown-item.editing_showhide",BUTTON_HIDE:".cm_action_menu .dropdown-menu .editing_hide",BUTTON_SHOW:".cm_action_menu .dropdown-menu .editing_show",DELETE:'.section_action_menu .dropdown-item[data-action="deleteSection"]'};function o(){e(t.FIRST_SECTION+" .activity").length<=function(){let t=e(window).width();return e(".remui-format-list").length?t>=992?4:t>=768?3:2:t>=768?4:t>=481?2:1}()?(e(t.FIRST_SECTION).removeClass(t.ACTIVITY_TOGGLE_CLASS),e(t.ACTIVITY_TOGGLE_WRAPPER).hide()):(e(t.ACTIVITY_TOGGLE_WRAPPER).show(),e(t.FIRST_SECTION).addClass(t.ACTIVITY_TOGGLE_CLASS))}return{init:function(){e("#page-course-view-remuiformat .section-modchooser-link").addClass("btn btn-primary"),o(),e(window).resize(function(){o()}),"none"==e(".general-section-activities li:last").css("display")?e(".showactivitywrapper").show():e(".showactivitywrapper").hide(),e(t.ACTIVITY_TOGGLE).on("click",function(){e(this).hasClass(t.SHOW)?(e(this).html(M.util.get_string("showless","format_remuiformat")),e(this).toggleClass(t.SHOW)):(e(this).html(M.util.get_string("showmore","format_remuiformat")),e(this).toggleClass(t.SHOW),e("html, body").animate({scrollTop:e(t.FIRST_SECTION+" .activity:first-child").offset().top-66},"slow")),e(t.FIRST_SECTION).toggleClass(t.ACTIVITY_TOGGLE_CLASS)}),e("body").on("click",`${t.TOGGLE_HIGHLIGHT},\n                               ${t.TOGGLE_SHOWHIDE},\n                               ${t.BUTTON_HIDE},\n                               ${t.BUTTON_SHOW}`,function(){location.reload()}),e("body").on("click",`${t.DELETE}`,function(t){return t.preventDefault(),window.location.href=e(this).attr("href"),!0});var n=e(".read-more-target").height(),i=window.navigator.vendor,a="vertical";-1!=i.indexOf("Apple")&&(a="horizontal"),n>100&&(e(".generalsectioninfo").find("#readmorebtn").removeClass("d-none"),e(".read-more-target .no-overflow").addClass("text-clamp text-clamp-3").css("-webkit-box-orient",a),e(".read-more-target").addClass("text-clamp text-clamp-3").css("-webkit-box-orient",a)),e("#readmorebtn").on("click",function(){e(".read-more-target .no-overflow").removeClass("text-clamp text-clamp-3"),e(".read-more-target").removeClass("text-clamp text-clamp-3"),e(".generalsectioninfo").find("#readmorebtn").addClass("d-none"),e(".generalsectioninfo").find("#readlessbtn").removeClass("d-none")}),e("#readlessbtn").on("click",function(){e(".read-more-target .no-overflow").addClass("text-clamp text-clamp-3").css("-webkit-box-orient",a),e(".read-more-target").addClass("text-clamp text-clamp-3").css("-webkit-box-orient",a),e(".generalsectioninfo").find("#readmorebtn").removeClass("d-none"),e(".generalsectioninfo").find("#readlessbtn").addClass("d-none")})},adjustGeneralSectionActivities:o}});
//# sourceMappingURL=common.min.js.map

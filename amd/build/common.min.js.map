{"version":3,"sources":["common.js"],"names":["define","$","SELECTORS","ACTIVITY_TOGGLE","ACTIVITY_TOGGLE_CLASS","ACTIVITY_TOGGLE_WRAPPER","FIRST_SECTION","SHOW","TOGGLE_HIGHLIGHT","TOGGLE_SHOWHIDE","DELETE","adjustGeneralSectionActivities","length","width","window","getActivitiesPerRow","removeClass","hide","show","addClass","init","resize","on","this","hasClass","html","toggleClass","animate","scrollTop","offset","top","location","reload","event","preventDefault","href","attr"],"mappings":"AAuBAA,OAAO,CAAC,UAAW,SAASC,GAExB,IAAIC,EAAY,CACZC,gBAAiB,gBACjBC,sBAAuB,mBACvBC,wBAAyB,uBACzBC,cAAe,aACfC,KAAM,OACNC,iBAAkB,wDAClBC,gBAAiB,uDACjBC,OAAQ,oEA+BZ,SAASC,IACDV,EAAEC,EAAUI,cAAgB,cAAcM,QAzBlD,WACI,IAAIC,EAAQZ,EAAEa,QAAQD,QACtB,OAAIZ,EAAE,sBAAsBW,OACpBC,GAAS,IACF,EAEPA,GAAS,IACF,EAEJ,EAEHA,GAAS,IACF,EAEPA,GAAS,IACF,EAEJ,EAQ6CE,IACpDd,EAAEC,EAAUI,eAAeU,YAAYd,EAAUE,uBACjDH,EAAEC,EAAUG,yBAAyBY,SAErChB,EAAEC,EAAUG,yBAAyBa,OACrCjB,EAAEC,EAAUI,eAAea,SAASjB,EAAUE,wBA0CtD,MAAO,CACHgB,KAvCJ,WAEInB,EAAE,0DAA0DkB,SAAS,mBAErER,IACAV,EAAEa,QAAQO,OAAO,WACbV,MAGJV,EAAEC,EAAUC,iBAAiBmB,GAAG,QAAS,WAEjCrB,EAAEsB,MAAMC,SAAStB,EAAUK,OAC3BN,EAAEsB,MAAME,KAAK,qDACbxB,EAAEsB,MAAMG,YAAYxB,EAAUK,QAE9BN,EAAEsB,MAAME,KAAK,uDACbxB,EAAEsB,MAAMG,YAAYxB,EAAUK,MAC9BN,EAAE,cAAc0B,QAAQ,CACpBC,UAAW3B,EAAEC,EAAUI,cAAgB,0BAA0BuB,SAASC,IAAM,IACjF,SAEP7B,EAAEC,EAAUI,eAAeoB,YAAYxB,EAAUE,yBAIrDH,EAAE,QAAQqB,GAAG,WAAYpB,EAAUM,qBAAqBN,EAAUO,kBAAmB,WACjFsB,SAASC,WAIb/B,EAAE,QAAQqB,GAAG,WAAYpB,EAAUQ,SAAU,SAASuB,GAGlD,OAFAA,EAAMC,iBACNpB,OAAOiB,SAASI,KAAOlC,EAAEsB,MAAMa,KAAK,SAC7B,KAOXzB,+BAAgCA","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Enhancements to Lists components for easy course accessibility.\n *\n * @module     format/remuiformat\n * @copyright  WisdmLabs\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\ndefine(['jquery'], function($) {\n\n    var SELECTORS = {\n        ACTIVITY_TOGGLE: '.showactivity',\n        ACTIVITY_TOGGLE_CLASS: 'showhideactivity',\n        ACTIVITY_TOGGLE_WRAPPER: '.showactivitywrapper',\n        FIRST_SECTION: '#section-0',\n        SHOW: 'show',\n        TOGGLE_HIGHLIGHT: '.section_action_menu .dropdown-item.editing_highlight',\n        TOGGLE_SHOWHIDE: '.section_action_menu .dropdown-item.editing_showhide',\n        DELETE: '.section_action_menu .dropdown-item[data-action=\"deleteSection\"]'\n    };\n\n    /**\n     * Get number activities can be shown in first row and hide rest\n     * @return {Integer} Number activities in first row\n     */\n    function getActivitiesPerRow() {\n        let width = $(window).width();\n        if ($('.remui-format-list').length) {\n            if (width >= 992) {\n                return 4;\n            }\n            if (width >= 768) {\n                return 3;\n            }\n            return 2;\n        } else {\n            if (width >= 768) {\n                return 3;\n            }\n            if (width >= 481) {\n                return 2;\n            }\n            return 1;\n        }\n    }\n\n    /**\n     * Adjust the general section activities visibility after first row\n     */\n    function adjustGeneralSectionActivities() {\n        if ($(SELECTORS.FIRST_SECTION + ' .activity').length <= getActivitiesPerRow()) {\n            $(SELECTORS.FIRST_SECTION).removeClass(SELECTORS.ACTIVITY_TOGGLE_CLASS);\n            $(SELECTORS.ACTIVITY_TOGGLE_WRAPPER).hide();\n        } else {\n            $(SELECTORS.ACTIVITY_TOGGLE_WRAPPER).show();\n            $(SELECTORS.FIRST_SECTION).addClass(SELECTORS.ACTIVITY_TOGGLE_CLASS);\n        }\n    }\n\n    function init() {\n\n        $('#page-course-view-remuiformat .section-modchooser-link').addClass(\"btn btn-primary\");\n\n        adjustGeneralSectionActivities();\n        $(window).resize(function() {\n            adjustGeneralSectionActivities();\n        });\n\n        $(SELECTORS.ACTIVITY_TOGGLE).on('click', function() {\n\n            if ($(this).hasClass(SELECTORS.SHOW)) {\n                $(this).html('<i class=\"fa fa-angle-up\" aria-hidden=\"true\"></i>');\n                $(this).toggleClass(SELECTORS.SHOW); //Remove show class\n            } else {\n                $(this).html('<i class=\"fa fa-angle-down\" aria-hidden=\"true\"></i>');\n                $(this).toggleClass(SELECTORS.SHOW); //Add show class\n                $(\"html, body\").animate({\n                    scrollTop: $(SELECTORS.FIRST_SECTION + ' .activity:first-child').offset().top - 66\n                }, \"slow\");\n            }\n            $(SELECTORS.FIRST_SECTION).toggleClass(SELECTORS.ACTIVITY_TOGGLE_CLASS);\n        });\n\n        // Handling highlight and show hide dropdown.\n        $('body').on('click', `${SELECTORS.TOGGLE_HIGHLIGHT}, ${SELECTORS.TOGGLE_SHOWHIDE}`, function() {\n            location.reload();\n        });\n\n        // Handling deleteAction\n        $('body').on('click', `${SELECTORS.DELETE}`, function(event) {\n            event.preventDefault();\n            window.location.href = $(this).attr('href');\n            return true;\n        });\n\n    }\n\n    return {\n        init: init,\n        adjustGeneralSectionActivities: adjustGeneralSectionActivities\n    };\n});"],"file":"common.min.js"}